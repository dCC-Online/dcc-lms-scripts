<IfModule mod_ssl.c>
    <VirtualHost *:443>
        # ServerName {domain name}
        ServerName localhost
        DocumentRoot /var/canvas/public
        PassengerRuby /usr/bin/ruby3.1
        PassengerAppEnv production
        RailsEnv production
        SSLEngine On
        # FOR PRODUCTION
        # SSLCertificateFile /etc/letsencrypt/live/{your_domain}/fullchain.pem
        # SSLCertificateKeyFile /etc/letsencrypt/live/{your_domain}/privkey.pem
        # FOR TEST
        SSLCertificateFile /var/canvas/localhost.pem
        SSLCertificateKeyFile /var/canvas/localhost-key.pem
        # Include /etc/letsencrypt/options-ssl-apache.conf
        <Directory /var/canvas/public>
            AllowOverride all
            Options -MultiViews
            Require all granted
        </Directory>
        ProxyPass /api/session http://localhost:3001/api/session
        ProxyPassReverse /api/session http://localhost:3001/api/session
    </VirtualHost>
</IfModule>