<IfModule mod_ssl.c>
    <VirtualHost *:443>
        ServerName DOMAIN
        DocumentRoot /var/canvas/public
        PassengerRuby /usr/bin/ruby3.1
        PassengerAppEnv production
        RailsEnv production
        SSLEngine On

        SSLCertificateFile /var/canvas/localhost.pem
        SSLCertificateKeyFile /var/canvas/localhost-key.pem
        
        <Directory /var/canvas/public>
            AllowOverride all
            Options -MultiViews
            Require all granted
        </Directory>
        ProxyPass /api/session http://localhost:3001/api/session
        ProxyPassReverse /api/session http://localhost:3001/api/session
    </VirtualHost>
</IfModule>